function Drawing(t,i){this.DOMObject=document.createElement("canvas"),this.DOMObject.width=t||0,this.DOMObject.height=i||0,this.context=this.DOMObject.getContext("2d"),this.stack=new PropertyListing,this._fps=0,this.core=!1}function CanvasObject(t){t=t||{},this.id=t.id||""+Math.random(),this.now=t.settings||{},this.now.x=this.now.x||t.x||0,this.now.y=this.now.y||t.y||0,this.now.radian=this.now.radian||t.radian||0,this.services={},this._transform=new Listing,this.childrens=new PropertyListing(function(t,i){return i.parent=t,i.drawing=t.drawing,t.operationContext=i,t},function(t){},this),this.drawing=t.drawing||void 0}function Circle(t){CanvasObject.apply(this,arguments),this.constructor=Circle,this.now.radius=this.now.radius||t.radius||0,0===this.now.shift||0===t.shift?this.now.shift=0:this.now.shift=this.now.shift||t.shift||100}function Cluster(t,i){this.parameters={list:{},iteration:!1},CanvasObject.apply(this,[{}]),this.correlation=i||{},this.count=t||0,this.iteration=1,this.constructor=Cluster}function Curve(t){Line.apply(this,arguments),this.constructor=Curve}function Ellipse(t){CanvasObject.apply(this,arguments),this.constructor=Ellipse,this.now.step=this.now.step||.1}function Line(t){CanvasObject.apply(this,arguments),this.constructor=Line,this.now.step=+this.now.step||+t.step||1,this.points=this.now.points||t.points||[],this.services.points=[],0===this.now.shift||0===t.shift?this.now.shift=0:this.now.shift=this.now.shift||t.shift||100}function Path(t){Line.apply(this,arguments),this.constructor=Path}function Polygon(t){CanvasObject.apply(this,arguments),this.constructor=Polygon,this.now.sidesCount=this.now.sidesCount||t.sidesCount||3,this.now.radius=this.now.radius||t.radius||0}function Rect(t){CanvasObject.apply(this,arguments),this.constructor=Rect,this.now.width=this.now.width||t.width||0,this.now.height=this.now.height||t.height||this.now.width}function Spline(t){Line.apply(this,arguments),this.constructor=Spline}function EventsListing(){this.list={}}function Listing(){this.list={},this.append=function(t,i){this.list[t]=i},this.remove=function(t){delete this.list[t]}}function PropertyListing(t,i,n){this.list={},this.up=t||function(){},this.rem=i||function(){},this.parent=n}function markControlPoints(t,i,n){n=n||{},i.moveTo(+n.x,+n.y),i.arc(+n.x,+n.y,2,0,2*Math.PI);for(var e=0;t[e];e++)"object"!=typeof t[e][0]?(i.moveTo(t[e][0]+ +n.x,t[e][1]+ +n.y),i.arc(t[e][0]+ +n.x,t[e][1]+ +n.y,2,0,2*Math.PI)):markControlPoints(t[e],i,n)}function changeContext(t,i){for(var n in i)dataContextChanges[n]&&i[n]&&dataContextChanges[n](t,i[n])}function isNotNegativeNumber(t){return"number"==typeof+t&&+t>=0}function isHEXColor(t){return 7===t.length&&0===t.search(/#[0-9a-f]{6}/i)||4===t.length&&0===t.search(/#[0-9a-f]{3}/i)}function isRGB(t){return 0===t.search(/rgb\(( ?\d{1,3},){2} ?\d{1,3}\)/i)}function isRGBA(t){return 0===t.search(/rgba\(( ?\d{1,3},){3}( ?\d(\.\d+)?)\)/i)}function isColor(t){return isHEXColor(t)||isRGB(t)||isRGBA(t)}function random(t,i){return Math.floor(Math.random()*(i-t+1))+t}function getRandomRGB(t,i){return"rgb("+random(t,i)+","+random(t,i)+","+random(t,i)+")"}function SVGParser(t){for(var i=t.match(/d="( |,|\.|\d*|[A-Z])*"/g),n=[],e=0;i[e];e++){n[e]=i[e].match(/[A-Z] ( ?\d*(.\d{1,3})+,\d*(.\d{1,3})+){1,3}/g);for(var r=1;n[e][r];r++){var s=[];1===r&&(s=n[e][0].match(/\d+(\.\d+)?( |,)\d+(\.\d+)?/g)),n[e][r-1]=s.concat(n[e][r].match(/\d+(\.\d+)?( |,)\d+(\.\d+)?/g));for(var o=0;n[e][r-1][o];o++)n[e][r-1][o]=n[e][r-1][o].split(","),n[e][r-1][o][0]=+n[e][r-1][o][0],n[e][r-1][o][1]=+n[e][r-1][o][1],o===n[e][r-1].length-1&&(n[e][r-1][o][n[e][r-1][o].length]=!0);r===n[e].length-1&&delete n[e][r]}for(var a=[],r=0;n[e][r];r++)a=a.concat(n[e][r]);n[e]=a}return n}function Transform(t){this.options=t=t||{},this.id=t.property||""+Math.random(),this.options.rate=t.rate||1,this.options.factor=t.factor||1,this.options.endShift=t.endShift||100,this.options.startShift=+t.startShift||0,this.options.shift=t.shift||this.options.startShift,this.options.start=t.start||0,this.options.end=t.end,this.options.time=+t.time,this.events=new Listing,this.options.recourse=!!t.recourse,this.reverse=!1}Drawing.prototype.render=function(t,i){t.id=i,this.context.beginPath(),this.context.fillStyle="#000000",this.context.strokeStyle="#000000",this.context.closePath(),dynamic.move(t),this.context.beginPath(),t.animate(this.context);for(var n in t.childrens.list)this.render(t.childrens.list[n],n);this.context.closePath()},Drawing.prototype.pause=function(){var t=this.fps;this.fps=0,this._fps=t},Drawing.prototype.play=function(t){this.fps=+t||this.fps},Object.defineProperty(Drawing.prototype,"fps",{get:function(){return this._fps},set:function(t){var i=this;this.core&&clearInterval(this.core),0!=t&&(this.core=setInterval(function(){i.context.clearRect(0,0,i.DOMObject.width,i.DOMObject.height);for(var t in i.stack.list)i.render(i.stack.list[t],t)},1e3/+t)),this._fps=t}});var excessor={SVGParser:{services:{}}};!function(){var t=excessor.SVGParser,i=t.services;t.url=function(i){var n=new XMLHttpRequest;n.open("GET",i,!0),n.send(),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t.string(n.responseText)}},t.string=function(i,n){if(n=n||new CanvasObject,!i)return!1;var e,r=new DOMParser;e="string"==typeof i?r.parseFromString(i,"image/svg+xml"):i;for(var s=e.childNodes,o=0;s[o];o++)n.append(t.initNode(s[o]));return e},t.initNode=function(i){var n=new t.services.nodeCorrelation[i.nodeName];for(var e in t.services.attrCorrelation){var r=i.getAttribute(e);if(r){var s=t.services.attrCorrelation[e],o=null;"polygon"===i.nodeName&&(o=!0),n.now[s.property]=s.init(r,o)}}return n},i.nodeCorrelation={g:CanvasObject,path:Path,circle:Circle,rect:Rect,ellipse:Ellipse,polygon:Spline,polyline:Spline},i.attrCorrelation={fill:{property:"fill",init:function(t){return t}},stroke:{property:"stroke",init:function(t){return t}},"stroke-linecap":{property:"lineCap",init:function(t){return t}},"stroke-linejoin":{property:"lineJoin",init:function(t){return t}},"stroke-dasharray":{property:"lineDash",init:function(t){for(var n=t.match(i.regexp.realNumbers),e=0;n[e];e++)n[e]=+n[e];return n}},"stroke-dashoffset":{property:"dashOffset",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},r:{property:"radius",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},rx:{property:"semiAxisX",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},ry:{property:"semiAxisY",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},x:{property:"x",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},y:{property:"y",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},cx:{property:"x",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},cy:{property:"y",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},points:{property:"points",init:function(t,n){for(var e=t.match(i.regexp.points),r=0;e[r];r++){var s=e[r].match(i.regexp.realNumbers);e[r]=[+s[0],+s[1],!0]}return n&&e.push([e[0][0],e[0][1]]),e}},d:{property:"points",init:function(t){t=t.match(i.regexp.segment);for(var n=[],e=[0,0],r=0;t[r];r++)for(var s=t[r][0].toLowerCase(),o=i.pathDataCorrelation[s](t[r],n,e),a=0;a<o.length;a++){var h=o[a];if(n.push(h),h.length>3){var p=formula.getPointOnEllipse(h[0],h[1],h[2]+Math.PI,h[4],e[0],e[1]);e=formula.getPointOnEllipse(h[0],h[1],h[3],h[4],p[0],p[1])}else e=h}return n}}},i.regexp={intNumbers:/\-?\d+/g,realNumbers:/\-?\d+(\.\d+)?/g,points:/\-?\d+(\.\d+)?( |,|, )\-?\d+(\.\d+)?/g,segment:/[A-Za-z]( |,|, |\-?\d+(\.\d+)?)+/g},i.pathDataCorrelation={m:function(t,n){var e=t.match(i.regexp.realNumbers);return e=[+e[0],+e[1]],n.length?[!1,e]:[e]},l:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var r=n[e].match(i.regexp.realNumbers);n[e]=[+r[0],+r[1],!0]}return n},h:function(t,n,e){for(var r=t.match(i.regexp.realNumbers),s=e[0],o=0;r[o];o++)s+=+r[o];return[[s,e[1],!0]]},v:function(t,n,e){for(var r=t.match(i.regexp.realNumbers),s=e[1],o=0;r[o];o++)s+=+r[o];return[[e[0],s,!0]]},c:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var r=n[e].match(i.regexp.realNumbers);n[e]=[+r[0],+r[1],!((e+1)%3)]}return n},q:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var r=n[e].match(i.regexp.realNumbers);n[e]=[+r[0],+r[1],!((e+1)%2)]}return n},a:function(t,n,e){t=t.match(i.regexp.realNumbers);for(var r=[[]],s=0,o=0;t[o];o++)o%7===0&&0!==o&&(s++,r[s]=[]),r[s].push(+t[o]);for(var a=!1,h=0;r[h];h++){var p=r[h],c=a||e||[0,0];a=[p[5],p[6]];var f=[],u=Math.PI/180*p[2];f[0]=Math.cos(u)*((c[0]-a[0])/2)+Math.sin(u)*((c[1]-a[1])/2),f[1]=-Math.sin(u)*((c[0]-a[0])/2)+Math.cos(u)*((c[1]-a[1])/2);var l=[],v=Math.sqrt((Math.pow(p[0],2)*Math.pow(p[1],2)-Math.pow(p[0],2)*Math.pow(f[1],2)-Math.pow(p[1],2)*Math.pow(f[0],2))/(Math.pow(p[0],2)*Math.pow(f[1],2)+Math.pow(p[1],2)*Math.pow(f[0],2)));p[3]===p[4]&&(v=-v),l[0]=v*(p[0]*f[1]/p[1]),l[1]=v*-(p[1]*f[0]/p[0]);var g=[];g[0]=Math.cos(u)*l[0]-Math.sin(u)*l[1]+(c[0]+a[0])/2,g[1]=Math.sin(u)*l[0]+Math.cos(u)*l[1]+(c[1]+a[1])/2;var m=formula.getAngleOfVector(c,g)+u,d=formula.getAngleOfVector(a,g)+u;p[4]&&(d=2*Math.PI+d),r[h]=[p[0],p[1],m,d,u]}return r}}}(),Object.defineProperties(CanvasObject.prototype,{x:{get:function(){return this.parent?this.now.x*Math.cos(this.parent.radian)-this.now.y*Math.sin(this.parent.radian)+this.parent.x:+this.now.x},set:function(t){this.now.x=+t}},y:{get:function(){return this.parent?this.now.x*Math.sin(this.parent.radian)+this.now.y*Math.cos(this.parent.radian)+this.parent.y:+this.now.y},set:function(t){this.now.y=+t}},radian:{get:function(){return this.parent?+this.parent.radian+ +this.now.radian:+this.now.radian},set:function(t){this.now.radian=+t}},points:{get:function(){if(this.now.points){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var r=this.now.points[e];this.services.points[e]=[r[0]*n-r[1]*i,r[0]*i+r[1]*n,r[2]]}return this.services.points}},set:function(t){}}}),CanvasObject.prototype.start=function(){return this.drawing.stack.append(this),this},CanvasObject.prototype.stop=function(){return this.drawing.stack.remove(this.id),this},CanvasObject.prototype.animate=function(){},CanvasObject.prototype.transform=function(t){return this._transform||(this._transform=new Listing),t?(this._transform.append(t.id,t),this.operationContext=t,this):this._transform},CanvasObject.prototype.move=function(t,i){return i?this.transform(new Transform({property:"trajectory",type:"line",points:[[this.x,this.y],t],time:i})):(this.x=t[0],void(this.y=t[1]))},CanvasObject.prototype.moveProperty=function(t,i,n){return n?this.transform(new Transform({property:t,start:this.now[t],end:i,time:n})):void(this.now[t]=i)},CanvasObject.prototype.append=function(t){return this.childrens.append(t)},Circle.prototype=Object.create(CanvasObject.prototype),Circle.prototype.animate=function(t){var i=this.radian;t.arc(this.x,this.y,this.now.radius,i,2*Math.PI/100*this.now.shift+i),changeContext(t,this.now)},Cluster.prototype=Object.create(CanvasObject.prototype),Cluster.prototype.transform=function(){return this._transform||(this._transform=new Listing),this._transform},Cluster.prototype.animate=function(){return this.iteration>this.count?void(this.iteration=1):(this._animate=this.parent.animate,this._animate(this.drawing.context),this.iteration++,void this.animate())},Object.defineProperties(Cluster.prototype,{now:{get:function(){if(this.parameters.iteration!==this.iteration&&this.parent){for(var t in this.parent.now)if(this.correlation[t]){var i=+this.correlation[t];"function"==typeof this.correlation[t]&&(i=+this.correlation[t](this.iteration,this)),this.parameters.list[t]=this.parent.now[t]+i*this.iteration}else this.parameters.list[t]=this.parent.now[t];this.parameters.iteration=+this.iteration}return this.parameters.list},set:function(t){return this.parameters.list}},x:{get:function(){return this.parent.parent?this.now.x*Math.cos(this.parent.parent.radian)-this.now.y*Math.sin(this.parent.parent.radian)+this.parent.parent.x:+this.now.x},set:function(t){return+this.now.x}},y:{get:function(){return this.parent.parent?this.now.x*Math.sin(this.parent.parent.radian)+this.now.y*Math.cos(this.parent.parent.radian)+this.parent.parent.y:+this.now.y},set:function(t){return+this.now.y}},radian:{get:function(){return this.parent.parent?+this.parent.parent.radian+ +this.now.radian:+this.now.radian},set:function(t){return+this.now.radian}},services:{get:function(){return this.parent.services},set:function(t){}}}),Curve.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Curve.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var r=this.now.points[e];this.services.points[e]=[r[0]*n-r[1]*i,r[0]*i+r[1]*n,r[2]]}return this.services.points},set:function(t){this.services.length=formula.getLengthOfCurve(t,this.now.step),this.now.points=t}}}),Curve.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]),this.now.shift>100&&(this.now.shift=100);for(var e=i[0],r=0;r<=this.now.shift;r+=this.now.step){var s=formula.getPointOnCurve(r,i);Math.abs(e[0]-s[0])<1&&Math.abs(e[1]-s[1])<1||(e=s,t.lineTo(s[0]+n[0],s[1]+n[1]))}changeContext(t,this.now)}},Ellipse.prototype=Object.create(CanvasObject.prototype),Ellipse.prototype.animate=function(t){var i=0,n=formula.getPointOnEllipse(this.now.semiAxisX,this.now.semiAxisY,i,this.now.radian,this.x,this.y);for(t.moveTo(n[0],n[1]);i<=2*Math.PI;i+=this.now.step){var e=formula.getPointOnEllipse(this.now.semiAxisX,this.now.semiAxisY,i,this.now.radian,this.x,this.y);t.lineTo(e[0],e[1])}t.lineTo(n[0],n[1]),changeContext(t,this.now)},Line.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Line.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var r=this.now.points[e];this.services.points[e]=[r[0]*n-r[1]*i,r[0]*i+r[1]*n,r[2]]}return this.services.points},set:function(t){this.now.points=t}}}),Line.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]),this.now.shift>100&&(this.now.shift=100);for(var e=i[0],r=0;r<=this.now.shift;r+=this.now.step){var s=formula.getPointOnLine(r,this.points);Math.abs(e[0]-s[0])<1&&Math.abs(e[1]-s[1])<1||(e=s,t.lineTo(s[0]+this.x,s[1]+this.y))}changeContext(t,this.now)}},Path.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Path.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var r=this.now.points[e];this.now.points[e].length>3?(this.services.points[e]=this.now.points[e],this.services.points[e][4]=(this.services.points[e][4]||0)+t):this.services.points[e]=[r[0]*n-r[1]*i,r[0]*i+r[1]*n,r[2]]}return this.services.points},set:function(t){this.services.map=formula.getMapOfPath(t,this.now.step),this.services.length=0;for(var i in this.services.map)this.services.length+=this.services.map[i];this.now.points=t}}}),Path.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];this.now.shift>100&&(this.now.shift=100);for(var e=[[]],r=0,s=0;i[s];s++)i[s]!==!1?e[r].push(i[s]):i[s+1]&&i[s+1].length<=3&&r++;for(r=0;e[r];r++){var o=(e[r],i[0]);o.length>3&&(o=[0,0]),t.moveTo(o[0]+n[0],o[1]+n[1]);for(var a=i[0],h=0;h<=this.now.shift;h+=this.now.step){var p=formula.getPointOnPath(h,i,this.services);Math.abs(a[0]-p[0])<1&&Math.abs(a[1]-p[1])<1||(a=p,t.lineTo(p[0]+n[0],p[1]+n[1]))}}changeContext(t,this.now)},Polygon.prototype=Object.create(CanvasObject.prototype),Polygon.prototype.animate=function(t){if(this.now.sidesCount<3)return!1;var i=formula.getPointOnCircle(this.radian,this.now.radius,this.x,this.y);t.moveTo(i[0],i[1]);for(var n=0;n<this.now.sidesCount;n++){var e=formula.getPointOnCircle(2*Math.PI/this.now.sidesCount*n+this.radian,this.now.radius,this.x,this.y);t.lineTo(e[0],e[1])}t.lineTo(i[0],i[1]),changeContext(t,this.now)},Rect.prototype=Object.create(CanvasObject.prototype),Rect.prototype.animate=function(t){var i=this.radian,n=[this.x,this.y];t.moveTo(n[0],n[1]),n=formula.getPointOnCircle(i,this.width,n[0],n[1]),t.lineTo(n[0],n[1]),n=formula.getPointOnCircle(i+Math.PI/2,this.height,n[0],n[1]),t.lineTo(n[0],n[1]),n=formula.getPointOnCircle(i+Math.PI/2,this.height,this.x,this.y),t.lineTo(n[0],n[1]),t.lineTo(this.x,this.y),changeContext(t,this.now)},Spline.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Spline.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var r=this.now.points[e];this.services.points[e]=[r[0]*n-r[1]*i,r[0]*i+r[1]*n,r[2]]}return this.services.points},set:function(t){this.services.map=formula.getMapOfSpline(t,this.now.step),this.services.length=0;for(var i in this.services.map)this.services.length+=this.services.map[i];this.now.points=t}}}),Spline.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){this.now.shift>100&&(this.now.shift=100);for(var e=[[]],r=0,s=0;i[s];s++)i[s]!==!1?e[r].push(i[s]):r++;for(r=0;e[r];r++){var o=e[r];t.moveTo(o[0][0]+n[0],o[0][1]+n[1]);for(var a=o[0],h=0;h<=this.now.shift;h+=this.now.step){var p=formula.getPointOnSpline(h,o,this.services);Math.abs(a[0]-p[0])<1&&Math.abs(a[1]-p[1])<1||(a=p,t.lineTo(p[0]+n[0],p[1]+n[1]))}}changeContext(t,this.now)}},EventsListing.prototype.append=function(t,i,n){this.list[t]||(this.list[t]={}),this.list[t][i]||(this.list[t][i]=[]),this.list[t][i].push(n)},EventsListing.prototype.remove=function(t,i){return i?(delete this.list[t][i],void(0==Object.keys(this.list[t]).length&&delete this.list[t])):void delete this.list[t]},PropertyListing.prototype.append=function(t){return this.list[t.id]=t,this.up(this.parent,t)},PropertyListing.prototype.remove=function(t){delete this.list[t],this.rem(this.parent)},PropertyListing.prototype.getObject=function(t,i){if(i){for(var n in this.list){if(n==t)return this.list[n];var e=this.list[n].childrens.getObject(t,!0);if(e)return e}return!1}return this.list[t]},PropertyListing.prototype.getObjectsMap=function(){var t={};for(var i in this.list)t[i]=this.list[i].childrens.getObjectsMap();return t};var dataContextChanges={fill:function(t,i){t.fillStyle=i,t.fill()},lineWidth:function(t,i){t.lineWidth=+i},lineCap:function(t,i){t.lineCap=i},lineJoin:function(t,i){t.lineJoin=i},lineDash:function(t,i){t.setLineDash(i)},dashOffset:function(t,i){t.lineDashOffset=i},stroke:function(t,i){t.strokeStyle=i,t.stroke()}},CSSJSON=new function(){var t=this;t.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(t){return new Array(1+t).join(this)}},t.init();var n=/\/\*[\s\S]*?\*\//g,e=/([^\:]+):([^\;]*);/,r=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,s=1,o=2,a=3,h=4,p=function(t){return"undefined"==typeof t||0==t.length||null==t},c=function(t){return!p(t)&&(t.attributes&&t.children)};t.toJSON=function(c,f){var u={children:{},attributes:{}},l=null,v=0;if("undefined"==typeof f)var f={ordered:!1,comments:!1,stripComments:!1,split:!1};for(f.stripComments&&(f.comments=!1,c=c.replace(n,""));null!=(l=r.exec(c));)if(!p(l[s])&&f.comments){var g=l[s].trim();u[v++]=g}else if(p(l[o])){if(!p(l[a]))return u;if(!p(l[h])){var m=l[h].trim(),d=e.exec(m);if(d){var y=d[1].trim(),w=d[2].trim();if(f.ordered){var C={};C.name=y,C.value=w,C.type="attr",u[v++]=C}else if(y in u.attributes){var b=u.attributes[y];b instanceof Array||(u.attributes[y]=[b]),u.attributes[y].push(w)}else u.attributes[y]=w}else u[v++]=m}}else{var y=l[o].trim(),O=t.toJSON(c,f);if(f.ordered){var C={};C.name=y,C.value=O,C.type="rule",u[v++]=C}else{if(f.split)var x=y.split(",");else var x=[y];for(i in x){var M=x[i].trim();if(M in u.children)for(var P in O.attributes)u.children[M].attributes[P]=O.attributes[P];else u.children[M]=O}}}return u},t.toCSS=function(t,n,e){var r="";if("undefined"==typeof n&&(n=0),"undefined"==typeof e&&(e=!1),t.attributes)for(i in t.attributes){var s=t.attributes[i];if(s instanceof Array)for(var o=0;o<s.length;o++)r+=l(i,s[o],n);else r+=l(i,s,n)}if(t.children){var a=!0;for(i in t.children)e&&!a?r+="\n":a=!1,r+=v(i,t.children[i],n)}return r},t.toHEAD=function(i,n,e){var r=document.getElementsByTagName("head")[0],s=document.getElementById(n),o=null!==s&&s instanceof HTMLStyleElement;if(!p(i)&&r instanceof HTMLHeadElement){if(o){if(e!==!0&&!p(e))return;s.removeAttribute("id")}c(i)&&(i=t.toCSS(i));var a=document.createElement("style");if(a.type="text/css",p(n)?a.id="cssjson_"+u():a.id=n,a.styleSheet?a.styleSheet.cssText=i:a.appendChild(document.createTextNode(i)),r.appendChild(a),f(a))o&&s.parentNode.removeChild(s);else{if(a.parentNode.removeChild(a),!o)return;s.setAttribute("id",n),a=s}return a}},"undefined"!=typeof window&&(window.createCSS=t.toHEAD);var f=function(t){return t instanceof HTMLStyleElement&&t.sheet.cssRules.length>0},u=function(){return Date.now()||+new Date},l=function(t,i,n){return"\t".repeat(n)+t+": "+i+";\n"},v=function(i,n,e){var r="\t".repeat(e)+i+" {\n";return r+=t.toCSS(n,e+1),r+="\t".repeat(e)+"}\n"}},dynamic={move:function(t){var i=t.transform().list,n=t.drawing.fps,e=1e3/+n;for(var r in i){var s=i[r],o=s.options,a=s.event("start");a&&(a(a,s,t),s.events.remove("start")),o.step||(o.step=(o.endShift-o.startShift)/(o.time/e)),s.reverse?o.shift-=+o.step*o.rate:o.shift+=+o.step*o.rate,this.data[r]?this.data[r].prepareData(t):t.now[r]=o.start+(o.end-o.start)/100*s.shift;for(var h in s.events.list)if(!isNaN(+h)){if(s.reverse){if(+h>o.shift||+h<o.shift-o.step)continue}else if(+h<o.shift||+h>o.shift+o.step)continue;s.events.list[h](s.event(h),s,t)}if(s.reverse){if(o.shift>o.startShift)continue}else if(o.shift<o.endShift)continue;t.transform().remove(r),s.options.recourse&&(s.reverse?s.options.shift=s.options.endShift:s.options.shift=s.options.startShift,t.transform(s)),s.event("callback")&&(s.event("callback")(s.event("callback"),s,t),s.events.remove("callback"))}},data:{trajectory:{type:"trajectory",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=this.functions[n.options.type](n.options,n.shift);t.x=e[0],t.y=e[1]},functions:{circle:function(t,i){var n=2*Math.PI/100*i;return t.reverse&&(n=2*Math.PI-2*Math.PI/100*i),formula.getPointOnCircle(n,t.radius,t.center[0],t.center[1])},polygon:function(t,i){},line:function(t,i){return formula.getPointOnLine(i,t.points)},curve:function(t,i){return formula.getPointOnCurve(i,t.points)}}},fill:{type:"fill",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,r=n.options.end,s=n.shift;t.now.fill=formula.changeColor(e,r,s)}},stroke:{type:"stroke",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,r=n.options.end,s=n.shift;t.now.stroke=formula.changeColor(e,r,s)}},points:{type:"points",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,r=n.options.end,s=n.shift;t.points=this.functions.pointsRecourse(e,r,s)},functions:{pointsRecourse:function(t,i,n){for(var e=[],r=0;r<t.length||r<i.length;r++)if(typeof t[r]==typeof i[r]&&t[r]){if("object"!=typeof t[r]){e=formula.getPointOnLine(n,[t,i]);break}e[r]=this.pointsRecourse(t[r],i[r],n)}else e[r]=t[r];return e}}}}},formula={getPointOnCircle:function(t,i,n,e){n=+n||0,e=+e||0;var r=+i*Math.sin(+t),s=+i*Math.cos(+t);return[n+s,e+r]},getPointOnEllipse:function(t,i,n,e,r,s){e=e||0,e*=-1,r=r||0,s=s||0;var o=t*Math.cos(+n),a=i*Math.sin(+n),h=o*Math.cos(e)+a*Math.sin(e),p=-o*Math.sin(e)+a*Math.cos(e);return[h+r,p+s]},getPointsFromPolygon:function(t,i,n,e,r){var s=[];s.push(this.getPointOnCircle(i,n,e,r));for(var o=0;o<t;o++)s.push(this.getPointOnCircle(2*Math.PI/t*o+i,n,e,r));return s},getPointOnCurve:function(t,i){var n=[0,0],e=i.length-1;t/=100;for(var r=0;i[r];r++){var s=this.factorial(e)/(this.factorial(r)*this.factorial(e-r))*Math.pow(t,r)*Math.pow(1-t,e-r);n[0]+=i[r][0]*s,n[1]+=i[r][1]*s}return n},getPointOnLine:function(t,i){var n=(i[1][0]-i[0][0])*(t/100)+i[0][0],e=(i[1][1]-i[0][1])*(t/100)+i[0][1];return[n,e]},getCenterToPointDistance:function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},HEXtoRGBA:function(t){var i=[];return 4===t.length&&(i[0]=parseInt(t.substring(1,2)+t.substring(1,2),16),i[1]=parseInt(t.substring(2,3)+t.substring(2,3),16),i[2]=parseInt(t.substring(3)+t.substring(3),16)),7===t.length&&(i[0]=parseInt(t.substring(1,3),16),i[1]=parseInt(t.substring(3,5),16),i[2]=parseInt(t.substring(5),16)),i[3]=1,i},RGBtoRGBA:function(t){var i=t.match(/\d{1,3}(\.\d+)?/g);return"0"===i[3]?i[3]=0:i[3]=+i[3]||1,i},changeColor:function(t,i,n){var e=[];isRGBA(t)||isRGB(t)?t=formula.RGBtoRGBA(t):isHEXColor(t)&&(t=formula.HEXtoRGBA(t)),isRGBA(i)||isRGB(i)?i=formula.RGBtoRGBA(i):isHEXColor(i)&&(i=formula.HEXtoRGBA(i));for(var r=0;r<3;r++)e[r]=Math.round(+t[r]+(+i[r]-+t[r])/100*n);var s=+(+t[3]+(+i[3]-+t[3])/100*n).toFixed(4);return"rgba("+e[0]+","+e[1]+","+e[2]+","+s+")"},factorial:function(t){for(var i=1;t;)i*=t--;return i},getAngleOfVector:function(t,i){i=i||[0,0],t=t||[0,0],t=[t[0]-i[0],t[1]-i[1]];var n=formula.getCenterToPointDistance(t),e=Math.asin(t[1]/n),r=Math.acos(t[0]/n);return r>Math.PI/2?Math.PI-e:e}};formula.getLengthOfCurve=function(t,i){i=i||1;for(var n=0,e=t[0],r=0;r<=100;r+=i){var s=formula.getPointOnCurve(r,t);n+=formula.getCenterToPointDistance([s[0]-e[0],s[1]-e[1]]),e=s}return n},formula.getMapOfSpline=function(t,i){for(var n=[[]],e=0,r=0;t[r];r++){var s=n[e].length;n[e][+s]=t[r],t[r][2]&&r!=t.length-1&&(n[e]=formula.getLengthOfCurve(n[e],i),e++,n[e]=[t[r]])}return n[e]=formula.getLengthOfCurve(n[e],i),n},formula.getPointOnSpline=function(t,i,n){var e=n.length/100*t;t>=100&&(e=n.length);for(var r=0,s=0,o=0,a=[];n.map[s]&&r+n.map[s]<e;s++)r+=n.map[s];for(var h=0;i[h]&&o<=s;h++)i[h][2]===!0&&o++,o>=s&&a.push(i[h]);return formula.getPointOnCurve((e-r)/(n.map[s]/100),a)},formula.getLengthOfEllipticArc=function(t,i,n,e,r){r=r||1;for(var s=0,o=this.getPointOnEllipse(t,i,n),a=(e-n)/100,h=0;h<=100;h+=r){var p=n+a*h,c=this.getPointOnEllipse(t,i,p);s+=this.getCenterToPointDistance([c[0]-o[0],c[1]-o[1]]),o=c}return s},formula.getMapOfPath=function(t,i){for(var n=[[]],e=0,r=[],s=0;t[s];s++){var o=t[s];if(o.length>3){if(n[e]=this.getLengthOfEllipticArc(o[0],o[1],o[2],o[3],i),!t[s+1])continue;var a=this.getPointOnEllipse(o[0],o[1],o[2]+Math.PI,o[4],r[0],r[1]),h=this.getPointOnEllipse(o[0],o[1],o[3],o[4],a[0],a[1]);e++,n[e]=[h],r=h}else n[e].push(o),(o[2]===!0||t[s+1]&&t[s+1].length>3)&&(n[e]=formula.getLengthOfCurve(n[e],i),e++,n[e]=[o]),r=o}return"number"!=typeof n[e]&&(n[e]=formula.getLengthOfCurve(n[e],i)),n},formula.getPointOnPath=function(t,i,n){var e=n.length/100*t;t>=100&&(e=n.length);for(var r=0,s=0,o=0,a=[];n.map[s]&&r+n.map[s]<e;s++)r+=n.map[s];for(var h=[],p=0;i[p]&&o<=s;p++){var c=i[p];if(c.length>3){var f=this.getPointOnEllipse(c[0],c[1],c[2]+Math.PI,c[4],h[0],h[1]);if(o===s){var u=(e-r)/(n.map[s]/100),l=c[2]+(c[3]-c[2])/100*u;return this.getPointOnEllipse(c[0],c[1],l,c[4],f[0],f[1])}h=this.getPointOnEllipse(c[0],c[1],c[3],c[4],f[0],f[1]),o++,o===s&&a.push(h)}else(c[2]===!0||i[p+1]&&i[p+1].length>3)&&o++,o>=s&&a.push(c),h=c}return this.getPointOnCurve((e-r)/(n.map[s]/100),a)},Transform.prototype.play=function(t){return this.options.rate=t||1,this},Transform.prototype.pause=function(){return this.options.rate=0,this},Transform.prototype.stop=function(){return this.options.rate=0,this.reverse?this.options.shift=this.options.endShift:this.options.shift=this.options.startShift,this},Transform.prototype.repeat=function(){this.reverse?this.options.shift=this.options.endShift:this.options.shift=this.options.startShift},Transform.prototype.event=function(t,i){return i?(this.events.append(t,i),this):this.events.list[t]},Object.defineProperties(Transform.prototype,{shift:{get:function(){return this.options.timingFunction?this.options.shift*formula.getPointOnCurve(this.options.shift,this.timingFunction)[1]:this.options.shift},set:function(t){return this.shift}},timingFunction:{get:function(){var t=[[0,0]];return t=t.concat(this.options.timingFunction),t.push([1,1]),t},set:function(t){this.options.timingFunction=t}}});