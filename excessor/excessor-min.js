function Drawing(t,i){this.DOMObject=document.createElement("canvas"),this.DOMObject.width=t||0,this.DOMObject.height=i||0,this.context=this.DOMObject.getContext("2d"),this.stack=new PropertyListing,this._fps=0,this.core=!1}function EventsListing(){this.list={}}function Listing(){this.list={},this.append=function(t,i){this.list[t]=i},this.remove=function(t){delete this.list[t]}}function PropertyListing(t,i,n){this.list={},this.up=t||function(){},this.rem=i||function(){},this.parent=n}function markControlPoints(t,i,n){n=n||{},i.moveTo(+n.x,+n.y),i.arc(+n.x,+n.y,2,0,2*Math.PI);for(var e=0;t[e];e++)"object"!=typeof t[e][0]?(i.moveTo(t[e][0]+ +n.x,t[e][1]+ +n.y),i.arc(t[e][0]+ +n.x,t[e][1]+ +n.y,2,0,2*Math.PI)):markControlPoints(t[e],i,n)}function changeContext(t,i){for(var n in i)dataContextChanges[n]&&i[n]&&dataContextChanges[n](t,i[n])}function isNotNegativeNumber(t){return"number"==typeof+t&&+t>=0}function isHEXColor(t){return 7===t.length&&0===t.search(/#[0-9a-f]{6}/i)||4===t.length&&0===t.search(/#[0-9a-f]{3}/i)}function isRGB(t){return 0===t.search(/rgb\(( ?\d{1,3},){2} ?\d{1,3}\)/i)}function isRGBA(t){return 0===t.search(/rgba\(( ?\d{1,3},){3}( ?\d(\.\d+)?)\)/i)}function isColor(t){return isHEXColor(t)||isRGB(t)||isRGBA(t)}function random(t,i){return Math.floor(Math.random()*(i-t+1))+t}function getRandomRGB(t,i){return"rgb("+random(t,i)+","+random(t,i)+","+random(t,i)+")"}function SVGParser(t){for(var i=t.match(/d="( |,|\.|\d*|[A-Z])*"/g),n=[],e=0;i[e];e++){n[e]=i[e].match(/[A-Z] ( ?\d*(.\d{1,3})+,\d*(.\d{1,3})+){1,3}/g);for(var s=1;n[e][s];s++){var r=[];1===s&&(r=n[e][0].match(/\d+(\.\d+)?( |,)\d+(\.\d+)?/g)),n[e][s-1]=r.concat(n[e][s].match(/\d+(\.\d+)?( |,)\d+(\.\d+)?/g));for(var o=0;n[e][s-1][o];o++)n[e][s-1][o]=n[e][s-1][o].split(","),n[e][s-1][o][0]=+n[e][s-1][o][0],n[e][s-1][o][1]=+n[e][s-1][o][1],o===n[e][s-1].length-1&&(n[e][s-1][o][n[e][s-1][o].length]=!0);s===n[e].length-1&&delete n[e][s]}for(var a=[],s=0;n[e][s];s++)a=a.concat(n[e][s]);n[e]=a}return n}function Transform(t){this.options=t=t||{},this.id=t.property||""+Math.random(),this.options.rate=t.rate||1,this.options.factor=t.factor||1,this.options.endShift=t.endShift||100,this.options.startShift=+t.startShift||0,this.options.shift=t.shift||this.options.startShift,this.options.start=t.start||0,this.options.end=t.end,this.options.time=+t.time,this.events=new Listing,this.options.recourse=!!t.recourse,this.reverse=!1}function CanvasObject(t){t=t||{},this.id=t.id||""+Math.random(),this.now=t.settings||{},this.now.x=this.now.x||t.x||0,this.now.y=this.now.y||t.y||0,this.now.radian=this.now.radian||t.radian||0,this.services={},this._transform=new Listing,this.childrens=new PropertyListing(function(t,i){return i.parent=t,i.drawing=t.drawing,t.operationContext=i,t},function(t){},this),this.drawing=t.drawing||void 0}function Circle(t){CanvasObject.apply(this,arguments),this.constructor=Circle,this.now.radius=this.now.radius||t.radius||0,0===this.now.shift||0===t.shift?this.now.shift=0:this.now.shift=this.now.shift||t.shift||100}function Cluster(t,i){this.parameters={list:{},iteration:!1},CanvasObject.apply(this,[{}]),this.correlation=i||{},this.count=t||0,this.iteration=1,this.constructor=Cluster}function Curve(t){Line.apply(this,arguments),this.constructor=Curve}function Ellipse(t){CanvasObject.apply(this,arguments),this.constructor=Ellipse,this.now.step=this.now.step||.1}function Line(t){CanvasObject.apply(this,arguments),this.constructor=Line,this.now.step=+this.now.step||+t.step||1,this.points=this.now.points||t.points||[],this.services.points=[],0===this.now.shift||0===t.shift?this.now.shift=0:this.now.shift=this.now.shift||t.shift||100}function Path(t){Line.apply(this,arguments),this.constructor=Path}function Polygon(t){CanvasObject.apply(this,arguments),this.constructor=Polygon,this.now.sidesCount=this.now.sidesCount||t.sidesCount||3,this.now.radius=this.now.radius||t.radius||0}function Rect(t){CanvasObject.apply(this,arguments),this.constructor=Rect,this.now.width=this.now.width||t.width||0,this.now.height=this.now.height||t.height||this.now.width}function Spline(t){Line.apply(this,arguments),this.constructor=Spline}Drawing.prototype.render=function(t,i){t.id=i,this.context.beginPath(),this.context.fillStyle="#000000",this.context.strokeStyle="#000000",this.context.closePath(),dynamic.move(t),this.context.beginPath(),t.animate(this.context);for(var n in t.childrens.list)this.render(t.childrens.list[n],n);this.context.closePath()},Drawing.prototype.pause=function(){var t=this.fps;this.fps=0,this._fps=t},Drawing.prototype.play=function(t){this.fps=+t||this.fps},Object.defineProperty(Drawing.prototype,"fps",{get:function(){return this._fps},set:function(t){var i=this;this.core&&clearInterval(this.core),0!=t&&(this.core=setInterval(function(){i.context.clearRect(0,0,i.DOMObject.width,i.DOMObject.height);for(var t in i.stack.list)i.render(i.stack.list[t],t)},1e3/+t)),this._fps=t}});var excessor={SVGParser:{services:{}}};!function(){var t=excessor.SVGParser,i=t.services;t.url=function(i){var n=new XMLHttpRequest;n.open("GET",i,!0),n.send(),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t.string(n.responseText)}},t.string=function(i,n){if(n=n||new CanvasObject,!i)return!1;var e,s=new DOMParser;e="string"==typeof i?s.parseFromString(i,"image/svg+xml"):i;for(var r=e.childNodes,o=0;r[o];o++)n.append(t.initNode(r[o]));return e},t.initNode=function(i){var n=new t.services.nodeCorrelation[i.nodeName];for(var e in t.services.attrCorrelation){var s=i.getAttribute(e);if(s){var r=t.services.attrCorrelation[e],o=null;"polygon"===i.nodeName&&(o=!0),n.now[r.property]=r.init(s,o)}}return n},i.nodeCorrelation={g:CanvasObject,path:Path,circle:Circle,rect:Rect,ellipse:Ellipse,polygon:Spline,polyline:Spline},i.attrCorrelation={fill:{property:"fill",init:function(t){return t}},stroke:{property:"stroke",init:function(t){return t}},"stroke-linecap":{property:"lineCap",init:function(t){return t}},"stroke-linejoin":{property:"lineJoin",init:function(t){return t}},"stroke-dasharray":{property:"lineDash",init:function(t){for(var n=t.match(i.regexp.realNumbers),e=0;n[e];e++)n[e]=+n[e];return n}},"stroke-dashoffset":{property:"dashOffset",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},r:{property:"radius",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},cx:{property:"x",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},cy:{property:"y",init:function(t){return+t.match(i.regexp.intNumbers)[0]}},points:{property:"points",init:function(t,n){for(var e=t.match(i.regexp.points),s=0;e[s];s++){var r=e[s].match(i.regexp.realNumbers);e[s]=[+r[0],+r[1],!0]}return n&&e.push([e[0][0],e[0][1]]),e}},d:{property:"points",init:function(t){t=t.match(i.regexp.segment);for(var n=[],e=[0,0],s=0;t[s];s++)for(var r=t[s][0].toLowerCase(),o=i.pathDataCorrelation[r](t[s],n,e),a=0;a<o.length;a++){var h=o[a];if(n.push(h),h.length>3){var p=formula.getPointOnEllipse(h[0],h[1],h[2]+Math.PI,h[4],e[0],e[1]);e=formula.getPointOnEllipse(h[0],h[1],h[3],h[4],p[0],p[1])}else e=h}return n}}},i.regexp={intNumbers:/\-?\d+/g,realNumbers:/\-?\d+(\.\d+)?/g,points:/\-?\d+(\.\d+)?( |,|, )\-?\d+(\.\d+)?/g,segment:/[A-Za-z]( |,|, |\-?\d+(\.\d+)?)+/g},i.pathDataCorrelation={m:function(t,n){var e=t.match(i.regexp.realNumbers);return e=[+e[0],+e[1]],n.length?[!1,e]:[e]},l:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var s=n[e].match(i.regexp.realNumbers);n[e]=[+s[0],+s[1],!0]}return n},h:function(t,n,e){for(var s=t.match(i.regexp.realNumbers),r=e[0],o=0;s[o];o++)r+=+s[o];return[[r,e[1],!0]]},v:function(t,n,e){for(var s=t.match(i.regexp.realNumbers),r=e[1],o=0;s[o];o++)r+=+s[o];return[[e[0],r,!0]]},c:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var s=n[e].match(i.regexp.realNumbers);n[e]=[+s[0],+s[1],!((e+1)%3)]}return n},q:function(t){for(var n=t.match(i.regexp.points),e=0;n[e];e++){var s=n[e].match(i.regexp.realNumbers);n[e]=[+s[0],+s[1],!((e+1)%2)]}return n},a:function(t,n,e){t=t.match(i.regexp.realNumbers);for(var s=[[]],r=0,o=0;t[o];o++)o%7===0&&0!==o&&(r++,s[r]=[]),s[r].push(+t[o]);for(var a=!1,h=0;s[h];h++){var p=s[h],c=a||e||[0,0];a=[p[5],p[6]];var f=[],u=Math.PI/180*p[2];f[0]=Math.cos(u)*((c[0]-a[0])/2)+Math.sin(u)*((c[1]-a[1])/2),f[1]=-Math.sin(u)*((c[0]-a[0])/2)+Math.cos(u)*((c[1]-a[1])/2);var l=[],v=Math.sqrt((Math.pow(p[0],2)*Math.pow(p[1],2)-Math.pow(p[0],2)*Math.pow(f[1],2)-Math.pow(p[1],2)*Math.pow(f[0],2))/(Math.pow(p[0],2)*Math.pow(f[1],2)+Math.pow(p[1],2)*Math.pow(f[0],2)));p[3]===p[4]&&(v=-v),l[0]=v*(p[0]*f[1]/p[1]),l[1]=v*-(p[1]*f[0]/p[0]);var g=[];g[0]=Math.cos(u)*l[0]-Math.sin(u)*l[1]+(c[0]+a[0])/2,g[1]=Math.sin(u)*l[0]+Math.cos(u)*l[1]+(c[1]+a[1])/2;var m=formula.getAngleOfVector(c,g)+u,d=formula.getAngleOfVector(a,g)+u;p[4]&&(d=2*Math.PI+d),s[h]=[p[0],p[1],m,d,u]}return s}}}(),EventsListing.prototype.append=function(t,i,n){this.list[t]||(this.list[t]={}),this.list[t][i]||(this.list[t][i]=[]),this.list[t][i].push(n)},EventsListing.prototype.remove=function(t,i){return i?(delete this.list[t][i],void(0==Object.keys(this.list[t]).length&&delete this.list[t])):void delete this.list[t]},PropertyListing.prototype.append=function(t){return this.list[t.id]=t,this.up(this.parent,t)},PropertyListing.prototype.remove=function(t){delete this.list[t],this.rem(this.parent)},PropertyListing.prototype.getObject=function(t,i){if(i){for(var n in this.list){if(n==t)return this.list[n];var e=this.list[n].childrens.getObject(t,!0);if(e)return e}return!1}return this.list[t]},PropertyListing.prototype.getObjectsMap=function(){var t={};for(var i in this.list)t[i]=this.list[i].childrens.getObjectsMap();return t};var dataContextChanges={fill:function(t,i){t.fillStyle=i,t.fill()},lineWidth:function(t,i){t.lineWidth=+i},lineCap:function(t,i){t.lineCap=i},lineJoin:function(t,i){t.lineJoin=i},lineDash:function(t,i){t.setLineDash(i)},dashOffset:function(t,i){t.lineDashOffset=i},stroke:function(t,i){t.strokeStyle=i,t.stroke()}},dynamic={move:function(t){var i=t.transform().list,n=t.drawing.fps,e=1e3/+n;for(var s in i){var r=i[s],o=r.options,a=r.event("start");a&&(a(a,r,t),r.events.remove("start")),o.step||(o.step=(o.endShift-o.startShift)/(o.time/e)),r.reverse?o.shift-=+o.step*o.rate:o.shift+=+o.step*o.rate,this.data[s]?this.data[s].prepareData(t):t.now[s]=o.start+(o.end-o.start)/100*r.shift;for(var h in r.events.list)if(!isNaN(+h)){if(r.reverse){if(+h>o.shift||+h<o.shift-o.step)continue}else if(+h<o.shift||+h>o.shift+o.step)continue;r.events.list[h](r.event(h),r,t)}if(r.reverse){if(o.shift>o.startShift)continue}else if(o.shift<o.endShift)continue;t.transform().remove(s),r.options.recourse&&(r.reverse?r.options.shift=r.options.endShift:r.options.shift=r.options.startShift,t.transform(r)),r.event("callback")&&(r.event("callback")(r.event("callback"),r,t),r.events.remove("callback"))}},data:{trajectory:{type:"trajectory",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=this.functions[n.options.type](n.options,n.shift);t.x=e[0],t.y=e[1]},functions:{circle:function(t,i){var n=2*Math.PI/100*i;return t.reverse&&(n=2*Math.PI-2*Math.PI/100*i),formula.getPointOnCircle(n,t.radius,t.center[0],t.center[1])},polygon:function(t,i){},line:function(t,i){return formula.getPointOnLine(i,t.points)},curve:function(t,i){return formula.getPointOnCurve(i,t.points)}}},fill:{type:"fill",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,s=n.options.end,r=n.shift;t.now.fill=formula.changeColor(e,s,r)}},stroke:{type:"stroke",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,s=n.options.end,r=n.shift;t.now.stroke=formula.changeColor(e,s,r)}},points:{type:"points",prepareData:function(t){var i=this.type,n=t.transform().list[i],e=n.options.start,s=n.options.end,r=n.shift;t.points=this.functions.pointsRecourse(e,s,r)},functions:{pointsRecourse:function(t,i,n){for(var e=[],s=0;s<t.length||s<i.length;s++)if(typeof t[s]==typeof i[s]&&t[s]){if("object"!=typeof t[s]){e=formula.getPointOnLine(n,[t,i]);break}e[s]=this.pointsRecourse(t[s],i[s],n)}else e[s]=t[s];return e}}}}},formula={getPointOnCircle:function(t,i,n,e){n=+n||0,e=+e||0;var s=+i*Math.sin(+t),r=+i*Math.cos(+t);return[n+r,e+s]},getPointOnEllipse:function(t,i,n,e,s,r){e=e||0,e*=-1,s=s||0,r=r||0;var o=t*Math.cos(+n),a=i*Math.sin(+n),h=o*Math.cos(e)+a*Math.sin(e),p=-o*Math.sin(e)+a*Math.cos(e);return[h+s,p+r]},getPointsFromPolygon:function(t,i,n,e,s){var r=[];r.push(this.getPointOnCircle(i,n,e,s));for(var o=0;o<t;o++)r.push(this.getPointOnCircle(2*Math.PI/t*o+i,n,e,s));return r},getPointOnCurve:function(t,i){var n=[0,0],e=i.length-1;t/=100;for(var s=0;i[s];s++){var r=this.factorial(e)/(this.factorial(s)*this.factorial(e-s))*Math.pow(t,s)*Math.pow(1-t,e-s);n[0]+=i[s][0]*r,n[1]+=i[s][1]*r}return n},getPointOnLine:function(t,i){var n=(i[1][0]-i[0][0])*(t/100)+i[0][0],e=(i[1][1]-i[0][1])*(t/100)+i[0][1];return[n,e]},getCenterToPointDistance:function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},HEXtoRGBA:function(t){var i=[];return 4===t.length&&(i[0]=parseInt(t.substring(1,2)+t.substring(1,2),16),i[1]=parseInt(t.substring(2,3)+t.substring(2,3),16),i[2]=parseInt(t.substring(3)+t.substring(3),16)),7===t.length&&(i[0]=parseInt(t.substring(1,3),16),i[1]=parseInt(t.substring(3,5),16),i[2]=parseInt(t.substring(5),16)),i[3]=1,i},RGBtoRGBA:function(t){var i=t.match(/\d{1,3}(\.\d+)?/g);return"0"===i[3]?i[3]=0:i[3]=+i[3]||1,i},changeColor:function(t,i,n){var e=[];isRGBA(t)||isRGB(t)?t=formula.RGBtoRGBA(t):isHEXColor(t)&&(t=formula.HEXtoRGBA(t)),isRGBA(i)||isRGB(i)?i=formula.RGBtoRGBA(i):isHEXColor(i)&&(i=formula.HEXtoRGBA(i));for(var s=0;s<3;s++)e[s]=Math.round(+t[s]+(+i[s]-+t[s])/100*n);var r=+(+t[3]+(+i[3]-+t[3])/100*n).toFixed(4);return"rgba("+e[0]+","+e[1]+","+e[2]+","+r+")"},factorial:function(t){for(var i=1;t;)i*=t--;return i},getAngleOfVector:function(t,i){i=i||[0,0],t=t||[0,0],t=[t[0]-i[0],t[1]-i[1]];var n=formula.getCenterToPointDistance(t),e=Math.asin(t[1]/n),s=Math.acos(t[0]/n);return s>Math.PI/2?Math.PI-e:e}};formula.getLengthOfCurve=function(t,i){i=i||1;for(var n=0,e=t[0],s=0;s<=100;s+=i){var r=formula.getPointOnCurve(s,t);n+=formula.getCenterToPointDistance([r[0]-e[0],r[1]-e[1]]),e=r}return n},formula.getMapOfSpline=function(t,i){for(var n=[[]],e=0,s=0;t[s];s++){var r=n[e].length;n[e][+r]=t[s],t[s][2]&&s!=t.length-1&&(n[e]=formula.getLengthOfCurve(n[e],i),e++,n[e]=[t[s]])}return n[e]=formula.getLengthOfCurve(n[e],i),n},formula.getPointOnSpline=function(t,i,n){var e=n.length/100*t;t>=100&&(e=n.length);for(var s=0,r=0,o=0,a=[];n.map[r]&&s+n.map[r]<e;r++)s+=n.map[r];for(var h=0;i[h]&&o<=r;h++)i[h][2]===!0&&o++,o>=r&&a.push(i[h]);return formula.getPointOnCurve((e-s)/(n.map[r]/100),a)},formula.getLengthOfEllipticArc=function(t,i,n,e,s){s=s||1;for(var r=0,o=this.getPointOnEllipse(t,i,n),a=(e-n)/100,h=0;h<=100;h+=s){var p=n+a*h,c=this.getPointOnEllipse(t,i,p);r+=this.getCenterToPointDistance([c[0]-o[0],c[1]-o[1]]),o=c}return r},formula.getMapOfPath=function(t,i){for(var n=[[]],e=0,s=[],r=0;t[r];r++){var o=t[r];if(o.length>3){if(n[e]=this.getLengthOfEllipticArc(o[0],o[1],o[2],o[3],i),!t[r+1])continue;var a=this.getPointOnEllipse(o[0],o[1],o[2]+Math.PI,o[4],s[0],s[1]),h=this.getPointOnEllipse(o[0],o[1],o[3],o[4],a[0],a[1]);e++,n[e]=[h],s=h}else n[e].push(o),(o[2]===!0||t[r+1]&&t[r+1].length>3)&&(n[e]=formula.getLengthOfCurve(n[e],i),e++,n[e]=[o]),s=o}return"number"!=typeof n[e]&&(n[e]=formula.getLengthOfCurve(n[e],i)),n},formula.getPointOnPath=function(t,i,n){var e=n.length/100*t;t>=100&&(e=n.length);for(var s=0,r=0,o=0,a=[];n.map[r]&&s+n.map[r]<e;r++)s+=n.map[r];for(var h=[],p=0;i[p]&&o<=r;p++){var c=i[p];if(c.length>3){var f=this.getPointOnEllipse(c[0],c[1],c[2]+Math.PI,c[4],h[0],h[1]);if(o===r){var u=(e-s)/(n.map[r]/100),l=c[2]+(c[3]-c[2])/100*u;return this.getPointOnEllipse(c[0],c[1],l,c[4],f[0],f[1])}h=this.getPointOnEllipse(c[0],c[1],c[3],c[4],f[0],f[1]),o++,o===r&&a.push(h)}else(c[2]===!0||i[p+1]&&i[p+1].length>3)&&o++,o>=r&&a.push(c),h=c}return this.getPointOnCurve((e-s)/(n.map[r]/100),a)},Transform.prototype.play=function(t){return this.options.rate=t||1,this},Transform.prototype.pause=function(){return this.options.rate=0,this},Transform.prototype.stop=function(){return this.options.rate=0,this.reverse?this.options.shift=this.options.endShift:this.options.shift=this.options.startShift,this},Transform.prototype.repeat=function(){this.reverse?this.options.shift=this.options.endShift:this.options.shift=this.options.startShift},Transform.prototype.event=function(t,i){return i?(this.events.append(t,i),this):this.events.list[t]},Object.defineProperties(Transform.prototype,{shift:{get:function(){return this.options.timingFunction?this.options.shift*formula.getPointOnCurve(this.options.shift,this.timingFunction)[1]:this.options.shift},set:function(t){return this.shift}},timingFunction:{get:function(){var t=[[0,0]];return t=t.concat(this.options.timingFunction),t.push([1,1]),t},set:function(t){this.options.timingFunction=t}}}),Object.defineProperties(CanvasObject.prototype,{x:{get:function(){return this.parent?this.now.x*Math.cos(this.parent.radian)-this.now.y*Math.sin(this.parent.radian)+this.parent.x:+this.now.x},set:function(t){this.now.x=+t}},y:{get:function(){return this.parent?this.now.x*Math.sin(this.parent.radian)+this.now.y*Math.cos(this.parent.radian)+this.parent.y:+this.now.y},set:function(t){this.now.y=+t}},radian:{get:function(){return this.parent?+this.parent.radian+ +this.now.radian:+this.now.radian},set:function(t){this.now.radian=+t}},points:{get:function(){if(this.now.points){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var s=this.now.points[e];this.services.points[e]=[s[0]*n-s[1]*i,s[0]*i+s[1]*n,s[2]]}return this.services.points}},set:function(t){}}}),CanvasObject.prototype.start=function(){return this.drawing.stack.append(this),this},CanvasObject.prototype.stop=function(){return this.drawing.stack.remove(this.id),this},CanvasObject.prototype.animate=function(){},CanvasObject.prototype.transform=function(t){return this._transform||(this._transform=new Listing),t?(this._transform.append(t.id,t),this.operationContext=t,this):this._transform},CanvasObject.prototype.move=function(t,i){return i?this.transform(new Transform({property:"trajectory",type:"line",points:[[this.x,this.y],t],time:i})):(this.x=t[0],void(this.y=t[1]))},CanvasObject.prototype.moveProperty=function(t,i,n){return n?this.transform(new Transform({property:t,start:this.now[t],end:i,time:n})):void(this.now[t]=i)},CanvasObject.prototype.append=function(t){return this.childrens.append(t)},Circle.prototype=Object.create(CanvasObject.prototype),Circle.prototype.animate=function(t){var i=this.radian;t.arc(this.x,this.y,this.now.radius,i,2*Math.PI/100*this.now.shift+i),changeContext(t,this.now)},Cluster.prototype=Object.create(CanvasObject.prototype),Cluster.prototype.transform=function(){return this._transform||(this._transform=new Listing),this._transform},Cluster.prototype.animate=function(){return this.iteration>this.count?void(this.iteration=1):(this._animate=this.parent.animate,this._animate(this.drawing.context),this.iteration++,void this.animate())},Object.defineProperties(Cluster.prototype,{now:{get:function(){if(this.parameters.iteration!==this.iteration&&this.parent){for(var t in this.parent.now)if(this.correlation[t]){var i=+this.correlation[t];"function"==typeof this.correlation[t]&&(i=+this.correlation[t](this.iteration,this)),this.parameters.list[t]=this.parent.now[t]+i*this.iteration}else this.parameters.list[t]=this.parent.now[t];this.parameters.iteration=+this.iteration}return this.parameters.list},set:function(t){return this.parameters.list}},x:{get:function(){return this.parent.parent?this.now.x*Math.cos(this.parent.parent.radian)-this.now.y*Math.sin(this.parent.parent.radian)+this.parent.parent.x:+this.now.x},set:function(t){return+this.now.x}},y:{get:function(){return this.parent.parent?this.now.x*Math.sin(this.parent.parent.radian)+this.now.y*Math.cos(this.parent.parent.radian)+this.parent.parent.y:+this.now.y},set:function(t){return+this.now.y}},radian:{get:function(){return this.parent.parent?+this.parent.parent.radian+ +this.now.radian:+this.now.radian},set:function(t){return+this.now.radian}},services:{get:function(){return this.parent.services},set:function(t){}}}),Curve.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Curve.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var s=this.now.points[e];this.services.points[e]=[s[0]*n-s[1]*i,s[0]*i+s[1]*n,s[2]]}return this.services.points},set:function(t){this.services.length=formula.getLengthOfCurve(t,this.now.step),this.now.points=t}}}),Curve.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]),this.now.shift>100&&(this.now.shift=100);for(var e=i[0],s=0;s<=this.now.shift;s+=this.now.step){var r=formula.getPointOnCurve(s,i);Math.abs(e[0]-r[0])<1&&Math.abs(e[1]-r[1])<1||(e=r,t.lineTo(r[0]+n[0],r[1]+n[1]))}changeContext(t,this.now)}},Ellipse.prototype=Object.create(CanvasObject.prototype),Ellipse.prototype.animate=function(t){var i=0,n=formula.getPointOnEllipse(this.now.semiAxisX,this.now.semiAxisY,i,this.now.radian,this.x,this.y);for(t.moveTo(n[0],n[1]);i<=2*Math.PI;i+=this.now.step){var e=formula.getPointOnEllipse(this.now.semiAxisX,this.now.semiAxisY,i,this.now.radian,this.x,this.y);t.lineTo(e[0],e[1])}t.lineTo(n[0],n[1]),changeContext(t,this.now)},Line.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Line.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var s=this.now.points[e];this.services.points[e]=[s[0]*n-s[1]*i,s[0]*i+s[1]*n,s[2]]}return this.services.points},set:function(t){this.now.points=t}}}),Line.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]),this.now.shift>100&&(this.now.shift=100);for(var e=i[0],s=0;s<=this.now.shift;s+=this.now.step){var r=formula.getPointOnLine(s,this.points);Math.abs(e[0]-r[0])<1&&Math.abs(e[1]-r[1])<1||(e=r,t.lineTo(r[0]+this.x,r[1]+this.y))}changeContext(t,this.now)}},Path.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Path.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var s=this.now.points[e];this.now.points[e].length>3?(this.services.points[e]=this.now.points[e],this.services.points[e][4]=(this.services.points[e][4]||0)+t):this.services.points[e]=[s[0]*n-s[1]*i,s[0]*i+s[1]*n,s[2]]}return this.services.points},set:function(t){this.services.map=formula.getMapOfPath(t,this.now.step),this.services.length=0;for(var i in this.services.map)this.services.length+=this.services.map[i];this.now.points=t}}}),Path.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];this.now.shift>100&&(this.now.shift=100);for(var e=[[]],s=0,r=0;i[r];r++)i[r]!==!1?e[s].push(i[r]):i[r+1]&&i[r+1].length<=3&&s++;for(s=0;e[s];s++){var o=(e[s],i[0]);o.length>3&&(o=[0,0]),t.moveTo(o[0]+n[0],o[1]+n[1]);for(var a=i[0],h=0;h<=this.now.shift;h+=this.now.step){var p=formula.getPointOnPath(h,i,this.services);Math.abs(a[0]-p[0])<1&&Math.abs(a[1]-p[1])<1||(a=p,t.lineTo(p[0]+n[0],p[1]+n[1]))}}changeContext(t,this.now)},Polygon.prototype=Object.create(CanvasObject.prototype),Polygon.prototype.animate=function(t){if(this.now.sidesCount<3)return!1;var i=formula.getPointOnCircle(this.radian,this.now.radius,this.x,this.y);t.moveTo(i[0],i[1]);for(var n=0;n<this.now.sidesCount;n++){var e=formula.getPointOnCircle(2*Math.PI/this.now.sidesCount*n+this.radian,this.now.radius,this.x,this.y);t.lineTo(e[0],e[1])}t.lineTo(i[0],i[1]),changeContext(t,this.now)},Rect.prototype=Object.create(CanvasObject.prototype),Rect.prototype.animate=function(t){var i=this.radian,n=[this.x,this.y];t.moveTo(n[0],n[1]),n=formula.getPointOnCircle(i,this.width,n[0],n[1]),t.lineTo(n[0],n[1]),n=formula.getPointOnCircle(i+Math.PI/2,this.height,n[0],n[1]),t.lineTo(n[0],n[1]),n=formula.getPointOnCircle(i+Math.PI/2,this.height,this.x,this.y),t.lineTo(n[0],n[1]),t.lineTo(this.x,this.y),changeContext(t,this.now)},Spline.prototype=Object.create(CanvasObject.prototype),Object.defineProperties(Spline.prototype,{points:{get:function(){this.services.points||(this.services.points=[]);for(var t=this.radian,i=Math.sin(t),n=Math.cos(t),e=0;this.now.points[e];e++){var s=this.now.points[e];this.services.points[e]=[s[0]*n-s[1]*i,s[0]*i+s[1]*n,s[2]]}return this.services.points},set:function(t){this.services.map=formula.getMapOfSpline(t,this.now.step),this.services.length=0;for(var i in this.services.map)this.services.length+=this.services.map[i];this.now.points=t}}}),Spline.prototype.animate=function(t){var i=this.points,n=[this.x,this.y];if(!(i.length<2)){this.now.shift>100&&(this.now.shift=100);for(var e=[[]],s=0,r=0;i[r];r++)i[r]!==!1?e[s].push(i[r]):s++;for(s=0;e[s];s++){var o=e[s];t.moveTo(o[0][0]+n[0],o[0][1]+n[1]);for(var a=o[0],h=0;h<=this.now.shift;h+=this.now.step){var p=formula.getPointOnSpline(h,o,this.services);Math.abs(a[0]-p[0])<1&&Math.abs(a[1]-p[1])<1||(a=p,t.lineTo(p[0]+n[0],p[1]+n[1]))}}changeContext(t,this.now)}};